<!DOCTYPE html>
<html>

<head>
    <base target="_top">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.23/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.bootstrap4.min.css">
    <!-- Add Bootstrap Icons CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css">
    <!-- Add FontAwesome Icons CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- Add Material Design Icons CDN -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- Add Heroicons CDN -->
    <link href="https://cdn.jsdelivr.net/npm/heroicons@1.0.6/umd/heroicons.min.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/dataTables.bootstrap4.min.js"></script>
    
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.bootstrap4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.print.min.js"></script>

    <style>
        .card {
            border-radius: 15px;
            box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            background-color: #007bff;
            color: white;
            text-align: center;
            font-weight: bold;
        }

        table.dataTable thead {
            background-color: #007bff;
            color: white;
        }

        #total-sum {
            margin-bottom: 20px;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
        }

        .table-active {
            background-color: #f8f9fa;
        }

        #total-income, #total-expenditure {
            font-weight: bold;
            color: #007bff;
        }

        /* Popup styling */
        #popup-form {
            display: none;
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            z-index: 10000;
            width: 80%;
            max-width: 500px;
            box-sizing: border-box;
        }

        .close-btn {
            background-color: #ff4d4d;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Button to open form */
        .add-transaction-btn {
            width: 100%;
            margin-top: 20px;
        }

        /* Icon styling */
        .btn-icon {
            margin-right: 10px;
        }
    </style>

    <?!= include('JavaScript_v1.1.1'); ?>
</head>

<body>
    <div class="container mt-4">
        <div class="card">
            <div class="card-header">Transaction Records</div>
            <div class="card-body">
                <!-- Display total values at the top -->
                <div id="total-sum">
                    <span><strong>Total Income: </strong><span id="total-income">1,000,000.00 TZS</span></span><br>
                    <span><strong>Total Expenditure: </strong><span id="total-expenditure">500,000.00 TZS</span></span>
                </div>

                <table id="data-table" class="table table-striped table-bordered table-hover"></table>

                <!-- Button to open form placed at the bottom of the card -->
                <button class="btn btn-primary add-transaction-btn" onclick="openPopup()">
                    <i class="fas fa-plus-circle btn-icon"></i> Add Transaction
                </button>
            </div>
        </div>
    </div>

    <!-- Popup Form inside the card -->
    <div id="popup-form">
        <h4>Add Transaction</h4>
        <iframe src="https://script.google.com/macros/s/AKfycby-MuoZlP5Q35ivyGIO2rUj0Y9tYQJou2KMou3Q5EAKFet9vpyrTiFuyauKXawp7srFdg/exec"
                width="100%" height="300px" frameborder="0"></iframe>
        <button class="close-btn" onclick="closePopup()">
            <i class="fas fa-times-circle"></i> Close
        </button>
    </div>
</body>

</html>
